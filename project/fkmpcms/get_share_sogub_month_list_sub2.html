<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
		<meta charset="utf-8" />
		<title>FKMP Total Management System</title>
		<meta name="description" content="Latest updates and statistic charts">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<style>
	.logTable td{
		visibility:hidden;
	}
</style>
		<!--begin::Web font -->
		<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
		<script>
			WebFont.load({
                google: {"families":["Poppins:300,400,500,600,700"]},
                active: function() {
                    sessionStorage.fonts = true;
                }
            });
    </script>

		<!--end::Web font -->

		<!--begin::Page Vendors Styles -->
		<link href="assets/vendors/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet" type="text/css" />

		<!--end::Page Vendors Styles -->

		<!--begin:: Global Mandatory Vendors -->
		<link href="assets/vendors/general/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet" type="text/css" />

		<!--end:: Global Mandatory Vendors -->

		<!--begin:: Global Optional Vendors -->
		<link href="assets/vendors/general/tether/dist/css/tether.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/bootstrap-datepicker/dist/css/bootstrap-datepicker3.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/bootstrap-datetime-picker/css/bootstrap-datetimepicker.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/bootstrap-timepicker/css/bootstrap-timepicker.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/bootstrap-select/dist/css/bootstrap-select.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/nouislider/distribute/nouislider.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/owl.carousel/distassets/owl.carousel.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/owl.carousel/distassets/owl.theme.default.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/dropzone/dist/dropzone.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/summernote/dist/summernote.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/bootstrap-markdown/css/bootstrap-markdown.min.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/animate.css/animate.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/toastr/build/toastr.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/morris.js/morris.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/sweetalert2/dist/sweetalert2.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/general/socicon/css/socicon.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/custom/vendors/line-awesome/css/line-awesome.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/custom/vendors/flaticon/flaticon.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/custom/vendors/flaticon2/flaticon.css" rel="stylesheet" type="text/css" />
		<link href="assets/vendors/custom/vendors/fontawesome5/css/all.min.css" rel="stylesheet" type="text/css" />

		<!--end:: Global Optional Vendors -->

		<!--begin::Global Theme Styles -->
		<link href="assets/demo/default/base/style.bundle.css" rel="stylesheet" type="text/css" />

		<!--end::Global Theme Styles -->

		<!--begin::Layout Skins -->
		<link href="assets/demo/default/skins/header/base/light.css" rel="stylesheet" type="text/css" />
		<link href="assets/demo/default/skins/header/menu/light.css" rel="stylesheet" type="text/css" />
		<link href="assets/demo/default/skins/brand/navy.css" rel="stylesheet" type="text/css" />
		<link href="assets/demo/default/skins/aside/navy.css" rel="stylesheet" type="text/css" />

		<!--end::Layout Skins -->
		<link rel="shortcut icon" href="assets/media/logos/favicon.ico" />
		
		<!-- $not defined 오류때문에 bottom 스크립트 탑으로 이동-->
		<script src="assets/vendors/general/jquery/dist/jquery.js" type="text/javascript"></script>
		<script src="assets/vendors/general/popper.js/dist/umd/popper.js" type="text/javascript"></script>
		<script src="assets/vendors/general/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
		<script src="assets/vendors/general/js-cookie/src/js.cookie.js" type="text/javascript"></script>
		<script src="assets/vendors/general/moment/min/moment.min.js" type="text/javascript"></script>
		<script src="assets/vendors/general/tooltip.js/dist/umd/tooltip.min.js" type="text/javascript"></script>
		<script src="assets/vendors/general/perfect-scrollbar/dist/perfect-scrollbar.js" type="text/javascript"></script>
		<script src="assets/vendors/general/sticky-js/dist/sticky.min.js" type="text/javascript"></script>
		<script src="assets/vendors/general/wnumb/wNumb.js" type="text/javascript"></script>
		
		
		<script src="assets/vendors/general/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
		
		<!-- bottom 스크립트 탑으로 이동-->		
		
		<script type='text/javascript' src="/js/popupcontroller.js?a=1"></script>
		
		<!--기존 음실연 스크립트 따로추가-->
		<!--<script src="/js/util/string_util.js" type="text/javascript"></script>-->
		
		<script src="/js/fkmp.comm.js" type="text/javascript"></script>
		
		<script type='text/javascript' src="/js/jquery.validate.min.js"></script>
		
		<script type='text/javascript' src="/js/string_util.js"></script>

		<script type='text/javascript' src="/js/jquery.form.min.js"></script>

		<script type='text/javascript' src="/js/common.js"></script>
		
		<script src="https://cdn.jsdelivr.net/npm/exif-js"></script>

		<script type='text/javascript' src="/js/ajax.comm.js" id="ajax_comm" base_url="<?=$base_url?>"></script>
		
		
	
<script>

	//해당회원의 뮤직로그
	function inc_top_go_mymusic(f_personcode, f_songcode)
	{
			$.ajax({
			    url:'/member/member/get_mymusic_url', //request 보낼 서버의 경로
			    type:'post', // 메소드(get, post, put 등)
			    data:{'f_personcode':f_personcode, 'f_songcode':f_songcode,"<?=$this->security->get_csrf_token_name() ?>": "<?=$this->security->get_csrf_hash() ?>"}, //보낼 데이터
			    dataType:"JSON",
			    async: false,
			    success: function(data) {
			        //서버로부터 정상적으로 응답이 왔을 때 실행
			        if(data.res == "ok")
			        {
			        	window.open(data.data,"win_mymusic");	
			        } else {
			        	alert("조회실패!");
			        	return;
			        }
			    },
			    error: function(err) {
			        //서버로부터 응답이 정상적으로 처리되지 못햇을 때 실행
			        
			    }
			});
	}
		
</script>
<style>
	label
	{
		overflow:hidden;
	}
</style>
</head>
<body> 
 
 
 
 
 
 
<style>
	.k-checkbox{
		padding: 0px 25px 0px 0px;
	}
</style>
<script>

	function sharelist_search()
	{ 
		$("#frmsch").attr('action', '/share/share_sogub/get_share_sogub_month_list_sub2');		
		$("#frmsch").submit();
	}
	
	function sharelist_excel()
	{
		$("#frmsch").attr('action', '/share/share_sogub/share_month_meminfo_excel');
		$("#frmsch").submit();		
	
	}

	function checkedall(){
		if($('#chk_all').is(":checked")){
			$(".chk").prop("checked", true);
		} else {
			$(".chk").prop("checked", false);
		}
	}
	
/*	
	//이관받을 회원 검색 팝업 오픈
	function search_person_popup(proc_gubun)
	{

		$('#checked_sequence').val(''); //리셋

		var popup_name="";
		if(proc_gubun == "all"){
			$('#checked_sequence').val('all');
			popup_name="all";
		} else {
			
			if(!$("input[name=row_info]:checked").val()){
				alert("항목을 체크해주세요.");
				return false;
			} 		
			
			$("input[name=row_info]:checked").each(function() {

				$('#checked_sequence').val($('#checked_sequence').val() + $(this).val() + "|");
			popup_name="part";	
			});			
			
		}
		
		window.open('/share/share_sogub/get_share_sogub_month_bunbe1', popup_name, 'width=600, height=600, menubar=no, status=no, toolbar=no');

		//팝업에서 선택한 회원 코드를 id="f_personcd_last" 에 넣고 sharelist_put()을 호출 : 팝업에서 자바스크립트로 처리
		
	}
	
	function sharelist_put(popup_personcd)
	{ 
		//ajax 이관처리
		//이관처리가 정상적으로 완료되면, 세부내역 프레임 리로딩.
		var f_personcode = $("#f_personcode").val();
		$.ajax({
			type:"POST" 
			,async:false
			,dataType:"json" 
			,data: $("#frmsch").serialize()+"&popup_personcd="+popup_personcd
			,url:"/share/Share_sogub/insert_escalate_data/"
			,success:function(args) { 
				if (args.status == "ok")
				{   
						sharelist_search();
				}
				else
					alert(args.msg);
			}
			,beforeSend:null
			,error: function(e) {
				alert(e.responseText);
			}
		});		
		
		
	}
*/	

	function sharelist_put(proc_gubun)
	{

		$('#checked_sequence').val(''); //리셋

		var popup_name="";
		if(proc_gubun == "all")
		{
			$('#checked_sequence').val('all');
		} else {
			
			if(!$("input[name=row_info]:checked").val()){
				alert("분배투입을 진행해주세요.");
				return false;
			} 		
			
			$("input[name=row_info]:checked").each(function() {

				$('#checked_sequence').val($('#checked_sequence').val() + $(this).val() + "|");
			});			
			
		}
		
		var msg = "선택한 항목을 해당 회원에게 분배투입하시겠습니까?";
		if(confirm(msg)){
			$.ajax({
				type:"POST" 
				,async:false
				,dataType:"json" 
				,data: $("#frmsch").serialize()+"&popup_personcd="+$('#f_personcode').val()
				,url:"/share/Share_sogub/update_sharelist_input/"
				,success:function(args) { 
					if (args.status == "ok")
					{   
							alert(args.msg);
							sharelist_search();								
					}
					else
						alert(args.msg);
				}
				,beforeSend:null
				,error: function(e) {
					alert(e.responseText);
				}
			});	
		}
		
	}



	function sharelist_put_cancel(proc_gubun)
	{
		$('#checked_sequence').val(''); //리셋
		if(proc_gubun == "all"){
			
			$('#checked_sequence').val('all');
			
		} else {
			
			$("input[name=row_info]:checked").each(function() {

				$('#checked_sequence').val($('#checked_sequence').val() + $(this).val() + "|");

			});			

			if(!$("input[name=row_info]:checked").val()){
				alert("항목을 체크해주세요.");
				return false;
			}
					
		}	 
			var f_personcode = $("#f_personcode").val();
			
			$.ajax({
				type:"POST" 
				,async:false
				,dataType:"json" 
				,data: $("#frmsch").serialize()
				,url:"/share/Share_sogub/cancel_sharelist_input/"
				,success:function(args) { 
					if (args.status == "ok")
					{   
							alert(args.msg);
							sharelist_search();							
					}
					else
						alert(args.msg);
				}
				,beforeSend:null
				,error: function(e) {
					alert(e.responseText);
				}
			});	

		
		//ajax 이관취소 처리
		//이관처리가 정상적으로 완료되면, 세부내역 프레임 리로딩.
				
	}	

	function complete(f_personcode)
	{

		$('#checked_sequence').val(''); //리셋

		if(f_personcode) 
		{
			$('#f_personcode').val(f_personcode);
			$('#transfer_yn').val("Y");
		}

			$.ajax({
				type:"POST" 
				,async:false
				,dataType:"json" 
				,data: $("#frmsch").serialize()
				,url:"/share/Share_sogub/insert_complete_data"
				,success:function(args) { 
					if (args.status == "ok")
					{   
							alert(args.msg);
							parent.$("#fm_search").submit();
					}
					else
						alert(args.msg);
				}
				,beforeSend:null
				,error: function(e) {
					alert(e.responseText);
				}
			});	

		
	}
	
	//이관받을 회원 검색 팝업 오픈
	function search_person_popup(proc_gubun)
	{
		var check_yn = false;
		
		$('#checked_sequence').val(''); //리셋

		var popup_name="";
		if(proc_gubun == "all"){
			$('#checked_sequence').val('all');
			popup_name="all";
		} else {

			$("td[name=f_input_yn]").each(function() {

				if($(this).html()=='Y')
				{
					check_yn = true;
					return false;			
				}
			});			

			if(check_yn == false)
			{
				alert("분배투입을 진행해주세요.");				
				return;
			}
			
			$("input[name=f_sequence]:checked").each(function() {

				$('#checked_sequence').val($('#checked_sequence').val() + $(this).val() + "|");
			popup_name="part";	
			});			
			
		}
		
		window.open('/share/share_sogub/get_share_sogub_month_bunbe1', popup_name, 'width=600, height=600, menubar=no, status=no, toolbar=no');

		//팝업에서 선택한 회원 코드를 id="f_personcd_last" 에 넣고 sharelist_put()을 호출 : 팝업에서 자바스크립트로 처리
		
	}
	
</script>

<form id="fm_excel" name="fm_excel">

</form>


&nbsp;&nbsp;&nbsp;&nbsp;<h5 id="f_realname">○  상세내역</h5>
<div class="k-portlet">
	<div class="k-portlet__body">
		<form id="frmsch" name="frmsch">
		<div class="dataTables_wrapper dt-bootstrap4 no-footer">
				<input type="hidden" id="f_personcode" name="f_personcode" value="">
				<input type="hidden" id="transfer_yn" name="transfer_yn" value="N">
				<input type="hidden" id="f_bosang_type" name="f_bosang_type" value="">
				<table class="table table-striped- table-bordered table-hover table-checkable dataTable no-footer dtr-inline">
					<colgroup>
						<col />
						<col />
						<col />
						<col width="60"/>
						<col width="60"/>
					</colgroup>
					<tr>

						<td>
							<select class="form-control" id="sch_key" name="sch_key">
								<option value="F_SONGCD">곡코드</option>
								<option value="F_SONGSCH">곡명</option>
								<option value="F_ALBUMSCH">앨범명</option>
							</select>
						</td>
						<td>
							<input type="text" class="form-control" id="sch_val" name="sch_val" value=""/>
							
							<!-- 투입/해제시 필요 데이터 -->
							<input type="hidden" class="form-control" id="checked_sequence" name="checked_sequence" />
							<input type="hidden" class="form-control" id="f_personcd_send" name="f_personcd_send" />
							<input type="hidden" class="form-control" id="f_personcd_last" name="f_personcd_last" />
							<!-- end 투입/해제시 필요 데이터 -->
							
						</td>
						<td><input type="button" class="btn btn-primary" onclick="sharelist_search()" value="검색"/></td>
						<td><input type="button" class="btn btn-primary" onclick="sharelist_excel()" value="엑셀"/></td>
					</tr>
				</table>
		</div>

		<div class="input-group">


			<input type="button" class="btn btn-primary btn-sm" value="검색결과 전체 투입"  onclick="sharelist_put('all')" />&nbsp;&nbsp;
			<input type="button" class="btn btn-primary btn-sm" value="체크된 항목 분배투입" onclick="sharelist_put('part')" />&nbsp;&nbsp;
			<input type="button" class="btn btn-primary btn-sm" value="검색결과 전체 취소"  onclick="sharelist_put_cancel('all')" />&nbsp;&nbsp;
			<input type="button" class="btn btn-primary btn-sm" value="체크된 항목 투입취소" onclick="sharelist_put_cancel('part')"/>&nbsp;&nbsp;			
			<input type="button" class="btn btn-danger btn-sm" value="최종 소급 투입 완료" onclick="complete()"/>&nbsp; 	
			<input type="button" class="btn btn-primary btn-sm" value="최종 이관 투입 완료" onclick="search_person_popup('part')"/>

		</div>
		<div class="dataTables_wrapper dt-bootstrap4 no-footer">
			<table class="table table-striped- table-bordered table-hover table-checkable dataTable no-footer dtr-inline logTable">
				<colgroup>
					<col width="3%"/>
					<col width="5%"/>
					<col width="10%"/>
					<col />
					<col />
					<col width="12%"/>
					<col width="8%"/>
					<col width="13%"/>
					<col />
					<col />
					<col />
					<col />
				</colgroup>
				<tr>
					<th>
						<label class='k-checkbox k-checkbox--single k-checkbox--primary'>
							<input type="checkbox" id="chk_all" name="chk_all" onclick="checkedall()"/>
							<span></span>
						</label>
					</th>
					<th>분배<br>시기</th>
					<th>업체명</th>
					<th>서비스<br>(프로그램)</th>
					<th>곡코드</th>
					<th>곡명</th>
					<th>가수</th>
					<th>앨범</th>
					<th>파트</th>
					<th>횟수</th>
					<th>비율</th>
					<th>분배금</th>
					<th>투입여부</th>
				</tr>
				<tr>
					<td>
						<label class='k-checkbox k-checkbox--single k-checkbox--primary'>
							<input type="checkbox" class="chk" name="row_info" value=""/>
							<span></span>
						</label>
					</td>
					<td>20205</td>
					<td>멜론</td>
					<td>개인디음송</td>
					<td>600000040276929</td>
					<td>에잇(Prod.&Feat. SUGA of BTS)</td>
					<td>아이유(IU)</td>
					<td>에잇</td>
					<td>J</td>
					<td>20</td>
					<td></td>
					<td>200</td>
					<td>N</td>
				</tr>
				<tr>
					<td>
						<label class='k-checkbox k-checkbox--single k-checkbox--primary'>
							<input type="checkbox" class="chk" name="row_info" value=""/>
							<span></span>
						</label>
					</td>
					<td>20203</td>
					<td>벅스</td>
					<td>개인디음송</td>
					<td>700000016211359</td>
					<td>Love poem</td>
					<td>아이유(IU)</td>
					<td>Love poem</td>
					<td>J</td>
					<td>20</td>
					<td></td>
					<td>200</td>
					<td>N</td>
				</tr>
				<tr>
					<td>
						<label class='k-checkbox k-checkbox--single k-checkbox--primary'>
							<input type="checkbox" class="chk" name="row_info" value=""/>
							<span></span>
						</label>
					</td>
					<td>20203</td>
					<td>지니</td>
					<td>개인디음송</td>
					<td>600000022205276</td>
					<td>삐삐</td>
					<td>아이유(IU)</td>
					<td>삐삐</td>
					<td>J</td>
					<td>20</td>
					<td></td>
					<td>200</td>
					<td>N</td>
				</tr>	
				<tr>
					<td>
						<label class='k-checkbox k-checkbox--single k-checkbox--primary'>
							<input type="checkbox" class="chk" name="row_info" value=""/>
							<span></span>
						</label>
					</td>
					<td>20203</td>
					<td>지니</td>
					<td>개인디음송</td>
					<td>600000040050543</td>
					<td>말하는 대로 (2020 Live Ver.)</td>
					<td>처진달팽이(유재석&이적)</td>
					<td>놀면 뭐하니? 방구석 콘서트</td>
					<td>J</td>
					<td>20</td>
					<td></td>
					<td>200</td>
					<td>N</td>
				</tr>
				<tr>
					<td>
						<label class='k-checkbox k-checkbox--single k-checkbox--primary'>
							<input type="checkbox" class="chk" name="row_info" value=""/>
							<span></span>
						</label>
					</td>
					<td>20203</td>
					<td>FLO</td>
					<td>개인디음송</td>
					<td>600000030797715</td>
					<td>합정역 5번 출구</td>
					<td>유산슬</td>
					<td>뽕포유</td>
					<td>J</td>
					<td>20</td>
					<td></td>
					<td>200</td>
					<td>N</td>
				</tr>		
				<tr>
					<td>
						<label class='k-checkbox k-checkbox--single k-checkbox--primary'>
							<input type="checkbox" class="chk" name="row_info" value=""/>
							<span></span>
						</label>
					</td>
					<td>20203</td>
					<td>FLO</td>
					<td>개인디음송</td>
					<td>600000038736164</td>
					<td>사랑의 재개발 2</td>
					<td>유산슬</td>
					<td>사랑의재개발2</td>
					<td>J</td>
					<td>20</td>
					<td></td>
					<td>200</td>
					<td>N</td>
				</tr>																			
			</table>
		</div>
	</form>
<!-- 페이징 -->
	<div class="dataTables_wrapper dt-bootstrap4 no-footer">
		<div class="row">
			<div class="col-sm-12 col-md-5">
			</div>
			<div class="col-sm-12 col-md-7 dataTables_pager">
				<div class="dataTables_paginate paging_simple_numbers">
					<?=@$page_tags ?>
				</div>
			</div>
		</div>
	</div>
	<!-- //페이징 -->
	</div>
</div>

</div>

</body>
</html>